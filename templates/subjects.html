{% extends 'base.html' %}
{% block title %}
ReadMe: Subjects
{% endblock %}
{% block content %}

<div class="container">
<div class="row large-content">
    <div class="col-md-10 col-md-offset-1">
        <div class="row algorithm-header">
            <h3>Subjects</h3>
            <br>
            <p>Subject information will go here!</p>
        </div>  <!-- end of algorithm-header row -->
        <div class="graph-info" id="criteria-info">
        </div> <!-- end of graph-information row -->

        <div class="row context-graph" id="graph-space">

        {% for subject in subject_data %}
            <div class="col-md-4 graph">
                <div class="graph-box">
                    <canvas class="donut-chart" id="{{ subject['iden'] }}" width="250" height="250"></canvas>
                    <div class="region-title">
                        <h3><a href="/subjects/{{ all_subjects[subject['name']] }}">{{ subject['name'] }}</a></h3>
                        <h5>{{ subject['total'] }} Poems Total</h5>
                    </div> <!-- end of region title div -->
                </div> <!-- end of graph-box div -->
            </div> <!-- end of graph column -->
        {% endfor %}

        </div>  <!-- end of algorithm-graph row -->
        <div class="row all-subjects" style="border-top:1px solid black; border-bottom:1px solid black;">
            <p> All Subjects:
            </p>
        </div> <!-- end of all subjects row -->
    </div>  <!-- end of column -->
</div> <!-- end of main-content row -->
</div> <!-- end of container -->
<script>

    var colorList = ["#0C090A", "#666362", "#000000", "#B6B6B4", "#736F6E",
                     "#3B3131", "#566D7E", "#2B1B17", "#BCC6CC"];
    var more;
    var i;

{% for subject in subject_data %}
    
    var {{ subject['iden'] }}data = [];
    i = -1;

    {% for t, number in subject['others'] %}
        if (i > 8) {
            i = 0;
        } else {
            i += 1;
        };

        more = {value: {{ number }},
                color: colorList[i],
                highlight: "#696969",
                label: "{{ t }}".replace("&amp;", "&")};

        {{ subject['iden'] }}data.push(more);

    {% endfor %}


    var {{ subject['iden'] }}ctx = $("#{{ subject['iden'] }}").get(0).getContext("2d");
    var {{ subject['iden'] }}Chart = new Chart({{ subject['iden'] }}ctx).Doughnut({{ subject['iden'] }}data);

{% endfor %}
    // var ldLegend = LDChart.generateLegend();
    // $('#lex-div-graph').append(ldLegend);
</script>

{% endblock %}